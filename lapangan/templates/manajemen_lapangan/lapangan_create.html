{% extends 'base.html' %}
{% block content %}
<div class="min-h-screen bg-gray-100 flex items-center justify-center">
  <div class="bg-white shadow-lg rounded-xl p-8 w-full max-w-lg">
    <h1 class="text-3xl font-bold text-center mb-6">{% if form.instance.pk %}Tambah Lapangan{% else %}Buat Lapangan Baru{% endif %}</h1>
    <form id="lapanganForm" method="POST" enctype="multipart/form-data" class="space-y-4">
      <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
      {{ form.as_p }}
      <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold">{% if form.instance.pk %}Create{% else %}Simpan{% endif %}</button>
    </form>
  </div>
</div>
<script>
document.getElementById('lapanganForm').addEventListener('submit', function(e){
  e.preventDefault();
  var formData = new FormData(this);
  fetch(window.location.href, {
    method: 'POST',
    headers: {"X-Requested-With": "XMLHttpRequest"},
    body: formData
  }).then(response => response.json()).then(data => {
    if(data.status === 'success'){
      window.location.href = "{% url 'manajemen_lapangan:lapangan_list_owner' %}";
    } else {
      window.alert(data.message);
    }
  }).catch(err => {window.alert(err);});
});
</script>
{% endblock %}
